{"ast":null,"code":"import AppStore from '../../stores/Redux/AppStore';\nimport Cookies from 'js-cookie';\nexport const Login = datas => {\n  console.log(\"Login\", datas);\n  fetch(\"https://mycoffees.herokuapp.com/users/sign_in\", {\n    method: \"post\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify(datas)\n  }).then(response => {\n    console.log([...response.headers.get(\"authorization\")].join(''));\n    AppStore.dispatch({\n      type: 'EDIT_TOKEN',\n      newToken: [...response.headers.get(\"authorization\")].join('')\n    });\n    Cookies.set('token', [...response.headers.get(\"authorization\")].join(''), {\n      sameSite: \"None\",\n      secure: true\n    });\n    return response.json();\n  }).then(response => {\n    AppStore.dispatch({\n      type: \"EDIT_USER\",\n      newUser: response.user\n    });\n    Cookies.set('user', JSON.stringify(response.user), {\n      sameSite: \"None\",\n      secure: true\n    });\n    console.log(response);\n  });\n};\n_c = Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["AppStore","Cookies","Login","datas","console","log","fetch","method","headers","body","JSON","stringify","then","response","get","join","dispatch","type","newToken","set","sameSite","secure","json","newUser","user"],"sources":["/home/odin/Desktop/THPâ˜ /Developpeur/ProjetFinal1/projet-coffee/src/apiCalls/LoginCall/index.jsx"],"sourcesContent":["import AppStore from '../../stores/Redux/AppStore'\nimport Cookies from 'js-cookie'\n\nexport const Login = (datas) => {\n\n    console.log(\"Login\", datas)\n\n    fetch(\"https://mycoffees.herokuapp.com/users/sign_in\", {\n        method: \"post\",\n        headers: {\n            \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(datas),\n    }).then((response) => {\n        console.log([...response.headers.get(\"authorization\")].join(''))\n        AppStore.dispatch({\n            type: 'EDIT_TOKEN',\n            newToken: [...response.headers.get(\"authorization\")].join('')\n        })\n        Cookies.set('token', [...response.headers.get(\"authorization\")].join(''), {\n            sameSite: \"None\",\n            secure: true\n        })\n        return (response.json())\n    }).then((response) => {\n        AppStore.dispatch({\n            type: \"EDIT_USER\",\n            newUser: response.user\n        })\n        Cookies.set('user', JSON.stringify(response.user), {\n            sameSite: \"None\",\n            secure: true\n        })\n        console.log(response)\n    })\n}"],"mappings":"AAAA,OAAOA,QAAP,MAAqB,6BAArB;AACA,OAAOC,OAAP,MAAoB,WAApB;AAEA,OAAO,MAAMC,KAAK,GAAIC,KAAD,IAAW;EAE5BC,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBF,KAArB;EAEAG,KAAK,CAAC,+CAAD,EAAkD;IACnDC,MAAM,EAAE,MAD2C;IAEnDC,OAAO,EAAE;MACL,gBAAgB;IADX,CAF0C;IAKnDC,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeR,KAAf;EAL6C,CAAlD,CAAL,CAMGS,IANH,CAMSC,QAAD,IAAc;IAClBT,OAAO,CAACC,GAAR,CAAY,CAAC,GAAGQ,QAAQ,CAACL,OAAT,CAAiBM,GAAjB,CAAqB,eAArB,CAAJ,EAA2CC,IAA3C,CAAgD,EAAhD,CAAZ;IACAf,QAAQ,CAACgB,QAAT,CAAkB;MACdC,IAAI,EAAE,YADQ;MAEdC,QAAQ,EAAE,CAAC,GAAGL,QAAQ,CAACL,OAAT,CAAiBM,GAAjB,CAAqB,eAArB,CAAJ,EAA2CC,IAA3C,CAAgD,EAAhD;IAFI,CAAlB;IAIAd,OAAO,CAACkB,GAAR,CAAY,OAAZ,EAAqB,CAAC,GAAGN,QAAQ,CAACL,OAAT,CAAiBM,GAAjB,CAAqB,eAArB,CAAJ,EAA2CC,IAA3C,CAAgD,EAAhD,CAArB,EAA0E;MACtEK,QAAQ,EAAE,MAD4D;MAEtEC,MAAM,EAAE;IAF8D,CAA1E;IAIA,OAAQR,QAAQ,CAACS,IAAT,EAAR;EACH,CAjBD,EAiBGV,IAjBH,CAiBSC,QAAD,IAAc;IAClBb,QAAQ,CAACgB,QAAT,CAAkB;MACdC,IAAI,EAAE,WADQ;MAEdM,OAAO,EAAEV,QAAQ,CAACW;IAFJ,CAAlB;IAIAvB,OAAO,CAACkB,GAAR,CAAY,MAAZ,EAAoBT,IAAI,CAACC,SAAL,CAAeE,QAAQ,CAACW,IAAxB,CAApB,EAAmD;MAC/CJ,QAAQ,EAAE,MADqC;MAE/CC,MAAM,EAAE;IAFuC,CAAnD;IAIAjB,OAAO,CAACC,GAAR,CAAYQ,QAAZ;EACH,CA3BD;AA4BH,CAhCM;KAAMX,K"},"metadata":{},"sourceType":"module"}