{"ast":null,"code":"import _toConsumableArray from\"/home/odin/Desktop/THP\\u2620/Developpeur/ProjetFinal1/projet-coffee/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import AppStore from'../../stores/Redux/AppStore';import Cookies from'js-cookie';export var Login=function Login(datas){console.log(\"Login\",datas);fetch(\"https://mycoffees.herokuapp.com/users/sign_in\",{method:\"post\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(datas)}).then(function(response){console.log(_toConsumableArray(response.headers.get(\"authorization\")).join(''));AppStore.dispatch({type:'EDIT_TOKEN',newToken:_toConsumableArray(response.headers.get(\"authorization\")).join('')});Cookies.set('token',_toConsumableArray(response.headers.get(\"authorization\")).join(''),{sameSite:\"None\",secure:true});return response.json();}).then(function(response){AppStore.dispatch({type:\"EDIT_USER\",newUser:response.user});Cookies.set('user',JSON.stringify(response.user),{sameSite:\"None\",secure:true});console.log(response);});};","map":{"version":3,"names":["AppStore","Cookies","Login","datas","console","log","fetch","method","headers","body","JSON","stringify","then","response","get","join","dispatch","type","newToken","set","sameSite","secure","json","newUser","user"],"sources":["/home/odin/Desktop/THPâ˜ /Developpeur/ProjetFinal1/projet-coffee/src/apiCalls/LoginCall/index.jsx"],"sourcesContent":["import AppStore from '../../stores/Redux/AppStore'\nimport Cookies from 'js-cookie'\n\nexport const Login = (datas) => {\n\n    console.log(\"Login\", datas)\n\n    fetch(\"https://mycoffees.herokuapp.com/users/sign_in\", {\n        method: \"post\",\n        headers: {\n            \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(datas),\n    }).then((response) => {\n        console.log([...response.headers.get(\"authorization\")].join(''))\n        AppStore.dispatch({\n            type: 'EDIT_TOKEN',\n            newToken: [...response.headers.get(\"authorization\")].join('')\n        })\n        Cookies.set('token', [...response.headers.get(\"authorization\")].join(''), {\n            sameSite: \"None\",\n            secure: true\n        })\n        return (response.json())\n    }).then((response) => {\n        AppStore.dispatch({\n            type: \"EDIT_USER\",\n            newUser: response.user\n        })\n        Cookies.set('user', JSON.stringify(response.user), {\n            sameSite: \"None\",\n            secure: true\n        })\n        console.log(response)\n    })\n}"],"mappings":"iKAAA,MAAOA,SAAP,KAAqB,6BAArB,CACA,MAAOC,QAAP,KAAoB,WAApB,CAEA,MAAO,IAAMC,MAAK,CAAG,QAARA,MAAQ,CAACC,KAAD,CAAW,CAE5BC,OAAO,CAACC,GAAR,CAAY,OAAZ,CAAqBF,KAArB,EAEAG,KAAK,CAAC,+CAAD,CAAkD,CACnDC,MAAM,CAAE,MAD2C,CAEnDC,OAAO,CAAE,CACL,eAAgB,kBADX,CAF0C,CAKnDC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAeR,KAAf,CAL6C,CAAlD,CAAL,CAMGS,IANH,CAMQ,SAACC,QAAD,CAAc,CAClBT,OAAO,CAACC,GAAR,CAAY,mBAAIQ,QAAQ,CAACL,OAAT,CAAiBM,GAAjB,CAAqB,eAArB,CAAJ,EAA2CC,IAA3C,CAAgD,EAAhD,CAAZ,EACAf,QAAQ,CAACgB,QAAT,CAAkB,CACdC,IAAI,CAAE,YADQ,CAEdC,QAAQ,CAAE,mBAAIL,QAAQ,CAACL,OAAT,CAAiBM,GAAjB,CAAqB,eAArB,CAAJ,EAA2CC,IAA3C,CAAgD,EAAhD,CAFI,CAAlB,EAIAd,OAAO,CAACkB,GAAR,CAAY,OAAZ,CAAqB,mBAAIN,QAAQ,CAACL,OAAT,CAAiBM,GAAjB,CAAqB,eAArB,CAAJ,EAA2CC,IAA3C,CAAgD,EAAhD,CAArB,CAA0E,CACtEK,QAAQ,CAAE,MAD4D,CAEtEC,MAAM,CAAE,IAF8D,CAA1E,EAIA,MAAQR,SAAQ,CAACS,IAAT,EAAR,CACH,CAjBD,EAiBGV,IAjBH,CAiBQ,SAACC,QAAD,CAAc,CAClBb,QAAQ,CAACgB,QAAT,CAAkB,CACdC,IAAI,CAAE,WADQ,CAEdM,OAAO,CAAEV,QAAQ,CAACW,IAFJ,CAAlB,EAIAvB,OAAO,CAACkB,GAAR,CAAY,MAAZ,CAAoBT,IAAI,CAACC,SAAL,CAAeE,QAAQ,CAACW,IAAxB,CAApB,CAAmD,CAC/CJ,QAAQ,CAAE,MADqC,CAE/CC,MAAM,CAAE,IAFuC,CAAnD,EAIAjB,OAAO,CAACC,GAAR,CAAYQ,QAAZ,EACH,CA3BD,EA4BH,CAhCM"},"metadata":{},"sourceType":"module"}