{"ast":null,"code":"import _toConsumableArray from\"/home/odin/Desktop/THP\\u2620/Developpeur/ProjetFinal1/projet-coffee/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import AppStore from'../../stores/Redux/AppStore';import Cookies from'js-cookie';export var Register=function Register(datas){console.log(\"Register\");fetch(\"https://mycoffees.herokuapp.com/users\",{method:\"post\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(datas)}).then(function(response){AppStore.dispatch({type:'EDIT_TOKEN',newToken:_toConsumableArray(response.headers.get(\"authorization\")).join('')});Cookies.set('token',_toConsumableArray(response.headers.get(\"authorization\")).join(''),{sameSite:\"None\",secure:true});return response.json();}).then(function(response){AppStore.dispatch({type:\"EDIT_USER\",newUser:response.user});Cookies.set('user',JSON.stringify(response.user),{sameSite:\"None\",secure:true});});};","map":{"version":3,"names":["AppStore","Cookies","Register","datas","console","log","fetch","method","headers","body","JSON","stringify","then","response","dispatch","type","newToken","get","join","set","sameSite","secure","json","newUser","user"],"sources":["/home/odin/Desktop/THPâ˜ /Developpeur/ProjetFinal1/projet-coffee/src/apiCalls/RegisterCall/index.jsx"],"sourcesContent":["import AppStore from '../../stores/Redux/AppStore'\nimport Cookies from 'js-cookie'\n\nexport const Register = (datas) => {\n\n    console.log(\"Register\")\n\n    fetch(\"https://mycoffees.herokuapp.com/users\", {\n        method: \"post\",\n        headers: {\n            \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(datas),\n    }).then((response) => {\n        AppStore.dispatch({\n            type: 'EDIT_TOKEN',\n            newToken: [...response.headers.get(\"authorization\")].join('')\n        })\n        Cookies.set('token', [...response.headers.get(\"authorization\")].join(''), {\n            sameSite: \"None\",\n            secure: true\n        })\n        return (response.json())\n    }).then((response) => {\n        AppStore.dispatch({\n            type: \"EDIT_USER\",\n            newUser: response.user\n        })\n        Cookies.set('user', JSON.stringify(response.user), {\n            sameSite: \"None\",\n            secure: true\n        })\n    })\n}"],"mappings":"iKAAA,MAAOA,SAAP,KAAqB,6BAArB,CACA,MAAOC,QAAP,KAAoB,WAApB,CAEA,MAAO,IAAMC,SAAQ,CAAG,QAAXA,SAAW,CAACC,KAAD,CAAW,CAE/BC,OAAO,CAACC,GAAR,CAAY,UAAZ,EAEAC,KAAK,CAAC,uCAAD,CAA0C,CAC3CC,MAAM,CAAE,MADmC,CAE3CC,OAAO,CAAE,CACL,eAAgB,kBADX,CAFkC,CAK3CC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAeR,KAAf,CALqC,CAA1C,CAAL,CAMGS,IANH,CAMQ,SAACC,QAAD,CAAc,CAClBb,QAAQ,CAACc,QAAT,CAAkB,CACdC,IAAI,CAAE,YADQ,CAEdC,QAAQ,CAAE,mBAAIH,QAAQ,CAACL,OAAT,CAAiBS,GAAjB,CAAqB,eAArB,CAAJ,EAA2CC,IAA3C,CAAgD,EAAhD,CAFI,CAAlB,EAIAjB,OAAO,CAACkB,GAAR,CAAY,OAAZ,CAAqB,mBAAIN,QAAQ,CAACL,OAAT,CAAiBS,GAAjB,CAAqB,eAArB,CAAJ,EAA2CC,IAA3C,CAAgD,EAAhD,CAArB,CAA0E,CACtEE,QAAQ,CAAE,MAD4D,CAEtEC,MAAM,CAAE,IAF8D,CAA1E,EAIA,MAAQR,SAAQ,CAACS,IAAT,EAAR,CACH,CAhBD,EAgBGV,IAhBH,CAgBQ,SAACC,QAAD,CAAc,CAClBb,QAAQ,CAACc,QAAT,CAAkB,CACdC,IAAI,CAAE,WADQ,CAEdQ,OAAO,CAAEV,QAAQ,CAACW,IAFJ,CAAlB,EAIAvB,OAAO,CAACkB,GAAR,CAAY,MAAZ,CAAoBT,IAAI,CAACC,SAAL,CAAeE,QAAQ,CAACW,IAAxB,CAApB,CAAmD,CAC/CJ,QAAQ,CAAE,MADqC,CAE/CC,MAAM,CAAE,IAFuC,CAAnD,EAIH,CAzBD,EA0BH,CA9BM"},"metadata":{},"sourceType":"module"}